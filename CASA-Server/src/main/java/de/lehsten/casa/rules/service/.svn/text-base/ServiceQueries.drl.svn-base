#created on: 27.07.2012
package de.lehsten.casa

#list any import classes here.


import de.lehsten.casa.contextserver.types.entities.services.Service;
import de.lehsten.casa.contextserver.types.entities.event.Lecture;
import de.lehsten.casa.contextserver.types.entities.event.Course;
import de.lehsten.casa.contextserver.types.entities.services.websites.EventWebsite;
import de.lehsten.casa.contextserver.types.entities.services.websites.LocationWebsite;
import de.lehsten.casa.contextserver.types.entities.services.websites.Website;
import de.lehsten.casa.contextserver.types.entities.person.identity.StudIPIdentity;
import de.lehsten.casa.contextserver.types.entities.place.Place;

#declare any global variables here

query "GetServices" ()
	r : Service()
end

query "GetWebsites"
	r : Website()
end	

query "GetServiceByLecture" (String lecture)
	l : Lecture(title == lecture || studIP_ID == lecture)
	c : Course(lectures contains l)
	r : EventWebsite(event == l || event == c)
end	

query "GetServiceByUsername"(String userID)
	r : Website(restrictions contains userID)
end
	
query "GetServiceByLectureAndRole"(String lecture, String role)
	l : Lecture(title == lecture || studIP_ID == lecture)
//	c : Course(lectures contains l)
	r : EventWebsite((properties["StudIP_ID"] == l.StudIP_ID) && restrictions contains role )
end

query "GetServiceByLocationAndRole"(String location, String role)
	p : Place(title == location)
	r : LocationWebsite(places contains p && restrictions contains role)	
end

	
	
	